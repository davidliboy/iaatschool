<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UAA4 - Fonctions de référence</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f9ca24 0%, #f0932b 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }

        .content {
            padding: 30px;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .geogebra-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
        }

        .geogebra-frame {
            width: 100%;
            height: 500px;
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background: white;
        }

        .controls-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .control-group {
            background: #f1f3f4;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #f9ca24;
        }

        .control-group h3 {
            color: #2d3436;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .function-toggle {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 12px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .function-toggle:hover {
            background: #fff3cd;
            transform: translateX(5px);
        }

        .function-toggle input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.3);
            cursor: pointer;
        }

        .function-toggle label {
            cursor: pointer;
            font-weight: 500;
            color: #2d3436;
            flex-grow: 1;
        }

        .function-equation {
            font-family: 'Courier New', monospace;
            color: #6c5ce7;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .coefficient-controls {
            margin: 15px 0;
        }

        .coefficient-row {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 10px;
        }

        .coefficient-row label {
            min-width: 30px;
            font-weight: bold;
            color: #2d3436;
        }

        .coefficient-input {
            width: 80px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
        }

        .coefficient-input:focus {
            outline: none;
            border-color: #f9ca24;
            box-shadow: 0 0 0 2px rgba(249, 202, 36, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f9ca24 0%, #f0932b 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .advice-section {
            margin-top: 25px;
        }

        .advice-toggle {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            font-size: 1.1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .advice-content {
            display: none;
            background: #f8f4ff;
            border: 2px solid #a29bfe;
            border-radius: 10px;
            padding: 25px;
            margin-top: 10px;
            line-height: 1.8;
        }

        .advice-content.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .function-details {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .content {
                padding: 15px;
            }
            
            .geogebra-frame {
                height: 350px;
            }
            
            .controls-panel {
                grid-template-columns: 1fr;
            }

            .coefficient-row {
                flex-wrap: wrap;
            }
        }

        @media print {
            body { background: white; }
            .container { box-shadow: none; }
            .geogebra-container, .controls-panel { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>📈 UAA4 : Fonctions de référence</h1>
                <p>Explorez les fonctions essentielles et leurs graphiques</p>
            </div>
            <a href="index.html" class="back-btn">
                ⟵ Retour à l'accueil
            </a>
        </div>

        <div class="content">
            <div class="geogebra-container">
                <iframe id="geogebra-2d" class="geogebra-frame"
                    src="https://www.geogebra.org/classic">
                </iframe>
                <p style="margin-top: 15px; color: #666;">
                    <strong>Instructions :</strong> Utilisez les contrôles ci-dessous pour afficher les fonctions et modifier leurs paramètres. 
                    Observez comment les coefficients influencent la forme des graphiques.
                </p>
            </div>

            <div class="controls-panel">
                <div class="control-group">
                    <h3>📊 Fonctions disponibles</h3>
                    
                    <div class="function-toggle" onclick="toggleFunction('linear')">
                        <input type="checkbox" id="linear-check">
                        <label for="linear-check">
                            Fonction affine
                            <div class="function-equation">f(x) = ax + b</div>
                        </label>
                    </div>

                    <div class="function-toggle" onclick="toggleFunction('quadratic')">
                        <input type="checkbox" id="quadratic-check">
                        <label for="quadratic-check">
                            Fonction quadratique
                            <div class="function-equation">f(x) = ax² + bx + c</div>
                        </label>
                    </div>

                    <div class="function-toggle" onclick="toggleFunction('inverse')">
                        <input type="checkbox" id="inverse-check">
                        <label for="inverse-check">
                            Fonction inverse
                            <div class="function-equation">f(x) = a/x + b</div>
                        </label>
                    </div>

                    <div class="function-toggle" onclick="toggleFunction('absolute')">
                        <input type="checkbox" id="absolute-check">
                        <label for="absolute-check">
                            Valeur absolue
                            <div class="function-equation">f(x) = a|x + b| + c</div>
                        </label>
                    </div>
                </div>

                <div class="control-group">
                    <h3>⚙️ Paramètres de la fonction affine</h3>
                    <div id="linear-controls" style="display: none;">
                        <div class="coefficient-row">
                            <label>a =</label>
                            <input type="number" id="linear-a" class="coefficient-input" value="1" step="0.1">
                            <span style="margin-left: 10px; color: #666;">(pente)</span>
                        </div>
                        <div class="coefficient-row">
                            <label>b =</label>
                            <input type="number" id="linear-b" class="coefficient-input" value="0" step="0.1">
                            <span style="margin-left: 10px; color: #666;">(ordonnée origine)</span>
                        </div>
                        <button class="btn btn-secondary btn-small" onclick="updateFunction('linear')">🔄 Mettre à jour</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>⚙️ Paramètres de la fonction quadratique</h3>
                    <div id="quadratic-controls" style="display: none;">
                        <div class="coefficient-row">
                            <label>a =</label>
                            <input type="number" id="quadratic-a" class="coefficient-input" value="1" step="0.1">
                        </div>
                        <div class="coefficient-row">
                            <label>b =</label>
                            <input type="number" id="quadratic-b" class="coefficient-input" value="0" step="0.1">
                        </div>
                        <div class="coefficient-row">
                            <label>c =</label>
                            <input type="number" id="quadratic-c" class="coefficient-input" value="0" step="0.1">
                        </div>
                        <button class="btn btn-secondary btn-small" onclick="updateFunction('quadratic')">🔄 Mettre à jour</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>🎲 Actions</h3>
                    <button class="btn btn-primary" onclick="showAllFunctions()">👁️ Toutes les fonctions</button>
                    <button class="btn btn-secondary" onclick="hideAllFunctions()">🙈 Masquer tout</button>
                    <button class="btn btn-success" onclick="randomCoefficients()">🎲 Coefficients aléatoires</button>
                    <button class="btn btn-primary" onclick="resetToDefaults()">🔄 Valeurs par défaut</button>
                </div>
            </div>

            <div class="section">
                <h2>📚 Exercices interactifs</h2>
                <p>Utilisez le graphique ci-dessus pour répondre aux questions suivantes :</p>
                
                <div style="margin: 20px 0;">
                    <p><strong>1.</strong> Affichez la fonction affine f(x) = 2x + 3. Quelle est l'ordonnée à l'origine ?</p>
                    <p><strong>2.</strong> Modifiez le coefficient 'a' de la fonction quadratique. Que remarquez-vous ?</p>
                    <p><strong>3.</strong> Comparez les fonctions f(x) = x² et g(x) = -x². Quelle différence observez-vous ?</p>
                    <p><strong>4.</strong> La fonction inverse f(x) = 1/x a-t-elle un domaine de définition complet sur ℝ ?</p>
                </div>
            </div>

            <div class="advice-section">
                <button class="advice-toggle" onclick="toggleAdvice()">
                    <span>🧭</span>
                    <span>Conseils sur les fonctions</span>
                    <span id="advice-arrow">▼</span>
                </button>
                <div id="advice-content" class="advice-content">
                    <h3>📚 Guide des fonctions de référence :</h3>
                    
                    <div class="function-details">
                        <strong>🔸 Fonction affine : f(x) = ax + b</strong><br>
                        • Graphique : droite<br>
                        • a : pente (si a > 0 → croissante, si a < 0 → décroissante)<br>
                        • b : ordonnée à l'origine (point d'intersection avec l'axe Y)<br>
                        • Domaine : ℝ, Image : ℝ
                    </div>
                    
                    <div class="function-details">
                        <strong>🔸 Fonction quadratique : f(x) = ax² + bx + c</strong><br>
                        • Graphique : parabole<br>
                        • a > 0 → parabole "vers le haut", a < 0 → "vers le bas"<br>
                        • Sommet en x = -b/(2a)<br>
                        • c : ordonnée à l'origine<br>
                        • Domaine : ℝ, Image dépend du signe de a
                    </div>
                    
                    <div class="function-details">
                        <strong>🔸 Fonction inverse : f(x) = a/x + b</strong><br>
                        • Graphique : hyperbole<br>
                        • Asymptote verticale en x = 0<br>
                        • Asymptote horizontale en y = b<br>
                        • Domaine : ℝ* (ℝ privé de {0})<br>
                        • Strictement décroissante si a > 0
                    </div>
                    
                    <div class="function-details">
                        <strong>🔸 Valeur absolue : f(x) = a|x + b| + c</strong><br>
                        • Graphique : "V" ou "Λ" selon le signe de a<br>
                        • Sommet en x = -b<br>
                        • Symétrique par rapport à la droite x = -b<br>
                        • Domaine : ℝ, Image : [c,+∞[ si a > 0
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let activeFunctions = new Set();
        let functionParameters = {
            linear: { a: 1, b: 0 },
            quadratic: { a: 1, b: 0, c: 0 },
            inverse: { a: 1, b: 0 },
            absolute: { a: 1, b: 0, c: 0 }
        };

        // Basculer l'affichage d'une fonction
        function toggleFunction(functionType) {
            const checkbox = document.getElementById(functionType + '-check');
            const controls = document.getElementById(functionType + '-controls');
            
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                activeFunctions.add(functionType);
                if (controls) controls.style.display = 'block';
                showFunctionInGeoGebra(functionType);
            } else {
                activeFunctions.delete(functionType);
                if (controls) controls.style.display = 'none';
                hideFunctionInGeoGebra(functionType);
            }
            
            updateGeoGebraDisplay();
        }

        // Afficher toutes les fonctions
        function showAllFunctions() {
            const functions = ['linear', 'quadratic', 'inverse', 'absolute'];
            functions.forEach(func => {
                document.getElementById(func + '-check').checked = true;
                activeFunctions.add(func);
                const controls = document.getElementById(func + '-controls');
                if (controls) controls.style.display = 'block';
            });
            updateGeoGebraDisplay();
        }

        // Masquer toutes les fonctions
        function hideAllFunctions() {
            const functions = ['linear', 'quadratic', 'inverse', 'absolute'];
            functions.forEach(func => {
                document.getElementById(func + '-check').checked = false;
                activeFunctions.delete(func);
                const controls = document.getElementById(func + '-controls');
                if (controls) controls.style.display = 'none';
            });
            updateGeoGebraDisplay();
        }

        // Mettre à jour une fonction avec de nouveaux paramètres
        function updateFunction(functionType) {
            if (!activeFunctions.has(functionType)) return;
            
            switch(functionType) {
                case 'linear':
                    functionParameters.linear.a = parseFloat(document.getElementById('linear-a').value) || 1;
                    functionParameters.linear.b = parseFloat(document.getElementById('linear-b').value) || 0;
                    break;
                case 'quadratic':
                    functionParameters.quadratic.a = parseFloat(document.getElementById('quadratic-a').value) || 1;
                    functionParameters.quadratic.b = parseFloat(document.getElementById('quadratic-b').value) || 0;
                    functionParameters.quadratic.c = parseFloat(document.getElementById('quadratic-c').value) || 0;
                    break;
            }
            
            updateGeoGebraDisplay();
            showFunctionEquation(functionType);
        }

        // Générer des coefficients aléatoires
        function randomCoefficients() {
            // Fonction affine
            document.getElementById('linear-a').value = (Math.random() * 4 - 2).toFixed(1);
            document.getElementById('linear-b').value = (Math.random() * 6 - 3).toFixed(1);
            
            // Fonction quadratique
            document.getElementById('quadratic-a').value = (Math.random() * 2 - 1).toFixed(1);
            document.getElementById('quadratic-b').value = (Math.random() * 4 - 2).toFixed(1);
            document.getElementById('quadratic-c').value = (Math.random() * 4 - 2).toFixed(1);
            
            // Mettre à jour toutes les fonctions actives
            activeFunctions.forEach(func => {
                if (['linear', 'quadratic'].includes(func)) {
                    updateFunction(func);
                }
            });
        }

        // Réinitialiser aux valeurs par défaut
        function resetToDefaults() {
            document.getElementById('linear-a').value = 1;
            document.getElementById('linear-b').value = 0;
            document.getElementById('quadratic-a').value = 1;
            document.getElementById('quadratic-b').value = 0;
            document.getElementById('quadratic-c').value = 0;
            
            functionParameters = {
                linear: { a: 1, b: 0 },
                quadratic: { a: 1, b: 0, c: 0 },
                inverse: { a: 1, b: 0 },
                absolute: { a: 1, b: 0, c: 0 }
            };
            
            updateGeoGebraDisplay();
        }

        // Afficher l'équation d'une fonction
        function showFunctionEquation(functionType) {
            let equation = '';
            const params = functionParameters[functionType];
            
            switch(functionType) {
                case 'linear':
                    equation = `f(x) = ${params.a}x + ${params.b}`;
                    break;
                case 'quadratic':
                    equation = `f(x) = ${params.a}x² + ${params.b}x + ${params.c}`;
                    break;
                case 'inverse':
                    equation = `f(x) = ${params.a}/x + ${params.b}`;
                    break;
                case 'absolute':
                    equation = `f(x) = ${params.a}|x + ${params.b}| + ${params.c}`;
                    break;
            }
            
            console.log(`Équation ${functionType}: ${equation}`);
        }

        // Fonctions de simulation GeoGebra
        function showFunctionInGeoGebra(functionType) {
            console.log(`Affichage de la fonction: ${functionType}`);
        }

        function hideFunctionInGeoGebra(functionType) {
            console.log(`Masquage de la fonction: ${functionType}`);
        }

        function updateGeoGebraDisplay() {
            const iframe = document.getElementById('geogebra-2d');
            // Animation de mise à jour
            iframe.style.filter = 'brightness(1.1)';
            setTimeout(() => {
                iframe.style.filter = 'brightness(1)';
            }, 200);
        }

        // Basculer l'affichage des conseils
        function toggleAdvice() {
            const content = document.getElementById('advice-content');
            const arrow = document.getElementById('advice-arrow');
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                arrow.textContent = '▼';
            } else {
                content.classList.add('show');
                arrow.textContent = '▲';
            }
        }

        // Initialisation des événements
        document.addEventListener('DOMContentLoaded', function() {
            // Écouter les changements sur les inputs de coefficients
            ['linear-a', 'linear-b', 'quadratic-a', 'quadratic-b', 'quadratic-c'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('change', function() {
                        const functionType = id.includes('linear') ? 'linear' : 'quadratic';
                        if (activeFunctions.has(functionType)) {
                            updateFunction(functionType);
                        }
                    });
                }
            });
        });

        // Raccourcis clavier
        document.addEventListener('keydown', function(event) {
            switch(event.key) {
                case '1': toggleFunction('linear'); break;
                case '2': toggleFunction('quadratic'); break;
                case '3': toggleFunction('inverse'); break;
                case '4': toggleFunction('absolute'); break;
                case 'r': randomCoefficients(); break;
                case 'h': hideAllFunctions(); break;
                case 'a': showAllFunctions(); break;
            }
        });
    </script>
</body>
</html>