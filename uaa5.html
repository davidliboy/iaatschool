<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UAA5 - Second degr√© (trin√¥mes)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }

        .content {
            padding: 30px;
        }

        .exercise-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .equations-container {
            display: grid;
            gap: 20px;
            margin: 25px 0;
        }

        .equation-item {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            text-align: center;
        }

        .steps-container {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .step-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #6c5ce7;
        }

        .step-label {
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .discriminant-section {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .discriminant-input {
            width: 120px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            margin: 0 10px;
        }

        .discriminant-input:focus {
            outline: none;
            border-color: #6c5ce7;
            box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.1);
        }

        .solutions-section {
            margin-top: 15px;
        }

        .solution-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .solution-option {
            background: white;
            border: 2px solid #ddd;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .solution-option:hover {
            border-color: #6c5ce7;
            background: #f8f6ff;
        }

        .solution-option.selected {
            border-color: #00b894;
            background: #00b894;
            color: white;
        }

        .solution-option.wrong {
            border-color: #ff6b6b;
            background: #ff6b6b;
            color: white;
        }

        .result-indicator {
            margin-left: 10px;
            font-size: 1.2rem;
        }

        .buttons-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .advice-section {
            margin-top: 25px;
        }

        .advice-toggle {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            font-size: 1.1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .advice-content {
            display: none;
            background: #fff0f6;
            border: 2px solid #fd79a8;
            border-radius: 10px;
            padding: 25px;
            margin-top: 10px;
            line-height: 1.8;
        }

        .advice-content.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .formula-box {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .hint-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            display: none;
        }

        .hint-box.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            transition: all 0.3s ease;
        }

        .progress-dot.completed {
            background: #00b894;
        }

        .progress-dot.current {
            background: #6c5ce7;
            transform: scale(1.3);
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .content {
                padding: 15px;
            }
            
            .solution-options {
                grid-template-columns: 1fr;
            }
            
            .buttons-row {
                flex-direction: column;
                align-items: center;
            }
        }

        @media print {
            body { background: white; }
            .container { box-shadow: none; }
            .buttons-row, .advice-section { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>üìä UAA5 : Second degr√© (trin√¥mes)</h1>
                <p>R√©solution d'√©quations du second degr√© avec le discriminant</p>
            </div>
            <a href="index.html" class="back-btn">
                ‚üµ Retour √† l'accueil
            </a>
        </div>

        <div class="content">
            <div class="exercise-section">
                <h2>üéØ S√©rie d'√©quations du second degr√©</h2>
                <div class="progress-indicator" id="progress-indicator">
                    <div class="progress-dot current"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>

                <div id="equations-display" class="equations-container">
                    <div class="equation-item">
                        Cliquez sur "Nouvelle s√©rie" pour g√©n√©rer 5 √©quations du second degr√©
                    </div>
                </div>

                <div id="current-equation-work" class="steps-container" style="display: none;">
                    <div class="step-item">
                        <div class="step-label">
                            <span>üìù</span>
                            <span>√âtape 1 : Calcul du discriminant</span>
                        </div>
                        <div class="discriminant-section">
                            <p><strong>√âquation :</strong> <span id="current-equation"></span></p>
                            <p><strong>Formule :</strong> Œî = b¬≤ - 4ac</p>
                            <div style="margin: 15px 0;">
                                <span>Œî = </span>
                                <input type="number" id="discriminant-input" class="discriminant-input" placeholder="Votre calcul">
                                <span id="discriminant-result" class="result-indicator"></span>
                            </div>
                            <button class="btn btn-secondary" onclick="checkDiscriminant()">‚úÖ V√©rifier Œî</button>
                        </div>
                    </div>

                    <div class="step-item" id="solutions-step" style="display: none;">
                        <div class="step-label">
                            <span>üîç</span>
                            <span>√âtape 2 : D√©termination des solutions</span>
                        </div>
                        <div class="solutions-section">
                            <p id="discriminant-info"></p>
                            <p><strong>Choisissez la solution correcte :</strong></p>
                            <div id="solution-options" class="solution-options">
                                <!-- Les options seront g√©n√©r√©es dynamiquement -->
                            </div>
                            <button class="btn btn-secondary" onclick="checkSolution()">‚úÖ Valider la solution</button>
                        </div>
                    </div>
                </div>

                <div id="hints-container"></div>

                <div class="buttons-row">
                    <button class="btn btn-primary" onclick="generateNewSeries()">üé≤ Nouvelle s√©rie</button>
                    <button class="btn btn-secondary" onclick="nextEquation()" id="next-btn" style="display: none;">‚û°Ô∏è √âquation suivante</button>
                    <button class="btn btn-success" onclick="showHint()">üí° Indice</button>
                    <button class="btn btn-secondary" onclick="window.print()">üñ®Ô∏è Imprimer/PDF</button>
                </div>
            </div>

            <div class="advice-section">
                <button class="advice-toggle" onclick="toggleAdvice()">
                    <span>üß≠</span>
                    <span>Conseils pour les trin√¥mes</span>
                    <span id="advice-arrow">‚ñº</span>
                </button>
                <div id="advice-content" class="advice-content">
                    <h3>üìö M√©thode de r√©solution des √©quations du second degr√© :</h3>
                    
                    <div class="formula-box">
                        √âquation g√©n√©rale : ax¬≤ + bx + c = 0 (avec a ‚â† 0)
                    </div>
                    
                    <p><strong>√âtape 1 :</strong> Calculer le discriminant Œî = b¬≤ - 4ac</p>
                    
                    <div class="formula-box">
                        ‚Ä¢ Si Œî > 0 : 2 solutions r√©elles distinctes
                        <br>x‚ÇÅ = (-b - ‚àöŒî) / (2a) et x‚ÇÇ = (-b + ‚àöŒî) / (2a)
                        <br><br>
                        ‚Ä¢ Si Œî = 0 : 1 solution r√©elle (racine double)
                        <br>x = -b / (2a)
                        <br><br>
                        ‚Ä¢ Si Œî < 0 : aucune solution r√©elle
                    </div>
                    
                    <p><strong>üí° Astuces :</strong></p>
                    <ul style="margin: 10px 0 10px 20px;">
                        <li>Identifiez bien les coefficients a, b, et c</li>
                        <li>Attention aux signes dans le calcul du discriminant</li>
                        <li>V√©rifiez vos solutions en les substituant dans l'√©quation</li>
                        <li>Si a < 0, n'oubliez pas que cela affecte toute la formule</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSeries = [];
        let currentEquationIndex = 0;
        let currentEquation = {};
        let correctDiscriminant = 0;
        let correctSolutions = [];
        let hintsGiven = 0;

        // G√©n√©rer une nouvelle s√©rie de 5 √©quations
        function generateNewSeries() {
            currentSeries = [];
            currentEquationIndex = 0;
            let negativeDiscriminants = 0;
            
            for (let i = 0; i < 5; i++) {
                let equation;
                do {
                    equation = generateRandomEquation();
                    // S'assurer de ne pas avoir plus de 2 discriminants n√©gatifs
                    if (equation.discriminant < 0) {
                        if (negativeDiscriminants >= 2) continue;
                        negativeDiscriminants++;
                    }
                    break;
                } while (true);
                
                currentSeries.push(equation);
            }
            
            displayAllEquations();
            startCurrentEquation();
            updateProgressIndicator();
        }

        // G√©n√©rer une √©quation al√©atoire
        function generateRandomEquation() {
            const a = Math.floor(Math.random() * 6) + 1; // 1 √† 6
            const b = Math.floor(Math.random() * 13) - 6; // -6 √† 6
            const c = Math.floor(Math.random() * 13) - 6; // -6 √† 6
            
            const discriminant = b * b - 4 * a * c;
            
            let solutions = [];
            if (discriminant > 0) {
                const x1 = (-b - Math.sqrt(discriminant)) / (2 * a);
                const x2 = (-b + Math.sqrt(discriminant)) / (2 * a);
                solutions = [parseFloat(x1.toFixed(2)), parseFloat(x2.toFixed(2))].sort((a, b) => a - b);
            } else if (discriminant === 0) {
                const x = -b / (2 * a);
                solutions = [parseFloat(x.toFixed(2))];
            }
            
            return {
                a: a,
                b: b,
                c: c,
                discriminant: discriminant,
                solutions: solutions,
                equation: formatEquation(a, b, c)
            };
        }

        // Formater l'√©quation pour l'affichage
        function formatEquation(a, b, c) {
            let equation = `${a}x¬≤`;
            
            if (b > 0) equation += ` + ${b}x`;
            else if (b < 0) equation += ` - ${Math.abs(b)}x`;
            
            if (c > 0) equation += ` + ${c}`;
            else if (c < 0) equation += ` - ${Math.abs(c)}`;
            
            equation += ` = 0`;
            
            return equation;
        }

        // Afficher toutes les √©quations de la s√©rie
        function displayAllEquations() {
            const container = document.getElementById('equations-display');
            container.innerHTML = '';
            
            currentSeries.forEach((eq, index) => {
                const div = document.createElement('div');
                div.className = 'equation-item';
                div.innerHTML = `<strong>√âquation ${index + 1} :</strong> ${eq.equation}`;
                container.appendChild(div);
            });
        }

        // Commencer le travail sur l'√©quation courante
        function startCurrentEquation() {
            if (currentEquationIndex >= currentSeries.length) {
                alert('üéâ F√©licitations ! Vous avez termin√© toute la s√©rie !');
                return;
            }
            
            currentEquation = currentSeries[currentEquationIndex];
            correctDiscriminant = currentEquation.discriminant;
            correctSolutions = currentEquation.solutions;
            hintsGiven = 0;
            
            document.getElementById('current-equation').textContent = currentEquation.equation;
            document.getElementById('current-equation-work').style.display = 'block';
            document.getElementById('solutions-step').style.display = 'none';
            document.getElementById('discriminant-input').value = '';
            document.getElementById('discriminant-result').textContent = '';
            document.getElementById('hints-container').innerHTML = '';
            
            // R√©initialiser les couleurs
            document.getElementById('discriminant-input').style.borderColor = '#ddd';
        }

        // V√©rifier le calcul du discriminant
        function checkDiscriminant() {
            const userDiscriminant = parseInt(document.getElementById('discriminant-input').value);
            const resultElement = document.getElementById('discriminant-result');
            const inputElement = document.getElementById('discriminant-input');
            
            if (isNaN(userDiscriminant)) {
                inputElement.style.borderColor = '#ffa502';
                resultElement.textContent = '‚ö†Ô∏è';
                return;
            }
            
            if (userDiscriminant === correctDiscriminant) {
                inputElement.style.borderColor = '#00b894';
                resultElement.textContent = '‚úÖ';
                showSolutionsStep();
            } else {
                inputElement.style.borderColor = '#ff6b6b';
                resultElement.textContent = '‚ùå';
                showHint();
            }
        }

        // Afficher l'√©tape des solutions
        function showSolutionsStep() {
            const solutionsStep = document.getElementById('solutions-step');
            const infoElement = document.getElementById('discriminant-info');
            
            let info = `Œî = ${correctDiscriminant}. `;
            if (correctDiscriminant > 0) {
                info += "Il y a 2 solutions r√©elles distinctes.";
            } else if (correctDiscriminant === 0) {
                info += "Il y a 1 solution r√©elle (racine double).";
            } else {
                info += "Il n'y a aucune solution r√©elle.";
            }
            
            infoElement.textContent = info;
            generateSolutionOptions();
            solutionsStep.style.display = 'block';
        }

        // G√©n√©rer les options de solutions
        function generateSolutionOptions() {
            const container = document.getElementById('solution-options');
            container.innerHTML = '';
            
            let options = [];
            
            if (correctDiscriminant > 0) {
                // Bonne r√©ponse
                options.push(`x‚ÇÅ = ${correctSolutions[0]} et x‚ÇÇ = ${correctSolutions[1]}`);
                
                // Fausses r√©ponses
                const wrong1 = correctSolutions.map(x => (x + Math.random() * 2 - 1).toFixed(2));
                const wrong2 = correctSolutions.map(x => (-x).toFixed(2));
                options.push(`x‚ÇÅ = ${wrong1[0]} et x‚ÇÇ = ${wrong1[1]}`);
                options.push(`x‚ÇÅ = ${wrong2[0]} et x‚ÇÇ = ${wrong2[1]}`);
            } else if (correctDiscriminant === 0) {
                options.push(`x = ${correctSolutions[0]}`);
                options.push(`x = ${(correctSolutions[0] + 1).toFixed(2)}`);
                options.push(`x = ${(-correctSolutions[0]).toFixed(2)}`);
            } else {
                options.push("Aucune solution r√©elle");
                options.push("x = 0");
                options.push("Une infinit√© de solutions");
            }
            
            // M√©langer les options
            options.sort(() => Math.random() - 0.5);
            
            options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'solution-option';
                div.textContent = option;
                div.onclick = () => selectSolution(div, option);
                container.appendChild(div);
            });
        }

        // S√©lectionner une option de solution
        function selectSolution(element, option) {
            // D√©s√©lectionner toutes les autres options
            document.querySelectorAll('.solution-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // S√©lectionner celle cliqu√©e
            element.classList.add('selected');
            element.selectedOption = option;
        }

        // V√©rifier la solution choisie
        function checkSolution() {
            const selectedOption = document.querySelector('.solution-option.selected');
            if (!selectedOption) {
                alert('Veuillez choisir une option !');
                return;
            }
            
            let isCorrect = false;
            
            if (correctDiscriminant > 0) {
                const correctText = `x‚ÇÅ = ${correctSolutions[0]} et x‚ÇÇ = ${correctSolutions[1]}`;
                isCorrect = selectedOption.textContent === correctText;
            } else if (correctDiscriminant === 0) {
                const correctText = `x = ${correctSolutions[0]}`;
                isCorrect = selectedOption.textContent === correctText;
            } else {
                isCorrect = selectedOption.textContent === "Aucune solution r√©elle";
            }
            
            // Colorer toutes les options
            document.querySelectorAll('.solution-option').forEach(opt => {
                if (opt === selectedOption) {
                    opt.classList.add(isCorrect ? 'selected' : 'wrong');
                } else {
                    // Identifier et colorer la bonne r√©ponse
                    let correctText;
                    if (correctDiscriminant > 0) {
                        correctText = `x‚ÇÅ = ${correctSolutions[0]} et x‚ÇÇ = ${correctSolutions[1]}`;
                    } else if (correctDiscriminant === 0) {
                        correctText = `x = ${correctSolutions[0]}`;
                    } else {
                        correctText = "Aucune solution r√©elle";
                    }
                    
                    if (opt.textContent === correctText) {
                        opt.classList.add('selected');
                    }
                }
            });
            
            if (isCorrect) {
                document.getElementById('next-btn').style.display = 'inline-block';
            } else {
                showHint();
            }
        }

        // Passer √† l'√©quation suivante
        function nextEquation() {
            currentEquationIndex++;
            updateProgressIndicator();
            startCurrentEquation();
            document.getElementById('next-btn').style.display = 'none';
        }

        // Mettre √† jour l'indicateur de progression
        function updateProgressIndicator() {
            const dots = document.querySelectorAll('.progress-dot');
            dots.forEach((dot, index) => {
                dot.classList.remove('current', 'completed');
                if (index < currentEquationIndex) {
                    dot.classList.add('completed');
                } else if (index === currentEquationIndex) {
                    dot.classList.add('current');
                }
            });
        }

        // Afficher un indice
        function showHint() {
            hintsGiven++;
            const hintsContainer = document.getElementById('hints-container');
            
            let hintText = '';
            const { a, b, c } = currentEquation;
            
            if (hintsGiven === 1) {
                hintText = `üí° Pour l'√©quation ${currentEquation.equation}, identifiez : a = ${a}, b = ${b}, c = ${c}`;
            } else if (hintsGiven === 2) {
                hintText = `üí° Calcul : Œî = ${b}¬≤ - 4√ó${a}√ó${c} = ${b*b} - ${4*a*c}`;
            } else {
                hintText = `üí° Donc Œî = ${b*b} - ${4*a*c} = ${correctDiscriminant}`;
            }
            
            const hintBox = document.createElement('div');
            hintBox.className = 'hint-box show';
            hintBox.innerHTML = `<strong>Indice ${hintsGiven} :</strong> ${hintText}`;
            hintsContainer.appendChild(hintBox);
        }

        // Basculer l'affichage des conseils
        function toggleAdvice() {
            const content = document.getElementById('advice-content');
            const arrow = document.getElementById('advice-arrow');
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                arrow.textContent = '‚ñº';
            } else {
                content.classList.add('show');
                arrow.textContent = '‚ñ≤';
            }
        }

        // Validation en temps r√©el
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('discriminant-input').addEventListener('input', function() {
                this.style.borderColor = '#ddd';
                document.getElementById('discriminant-result').textContent = '';
            });
            
            document.getElementById('discriminant-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkDiscriminant();
                }
            });
        });

        // G√©n√©rer une s√©rie au chargement
        window.onload = function() {
            generateNewSeries();
        };
    </script>
</body>
</html>